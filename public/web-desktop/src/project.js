window.__require=function e(t,n,o){function a(s,i){if(!n[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var d="function"==typeof __require&&__require;if(!i&&d)return d(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){return a(t[s][1][e]||e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<o.length;s++)a(o[s]);return a}({Cards:[function(e,t,n){"use strict";cc._RF.push(t,"0c7fd/XkrhFZYdvO25DFgKE","Cards"),cc.Class({extends:cc.Component,properties:{cardWithPointsPrefab:{default:null,type:cc.Prefab}},initCards:function(e){this.node.removeAllChildren();for(var t=0;t<e.length;t++){var n=cc.instantiate(this.cardWithPointsPrefab);n.x=t%7*80,n.y=150*-Math.floor(t/7),n.getComponent("cardWithPoints").loadCard(e[t]),n.parent=this.node}},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"79f50jxO+9H1rWTW+uatN7m","Constants"),t.exports.remoteUrl="fun-world.xyz:3000",t.exports.imagesUrl="https://www.fun-world.xyz:3000/images",t.exports.events={CREATE_PLAYER_ID:"CREATE_PLAYER_ID",OPPONENT_OFFLINE:"OPPONENT_OFFLINE",PAIRING:"PAIRING",START:"START",SELECT_CARD:"SELECT_CARD",CARD_SELECTED:"CARD_SELECTED",OPPONENT_CARD_SELECTED:"OPPONENT_CARD_SELECTED",DISCARD_CARD:"DISCARD_CARD",CARD_DISCARDED:"CARD_DISCARDED",OPPONENT_CARD_DISCARDED:"OPPONENT_CARD_DISCARDED"},t.exports.cardWidth=55,t.exports.cardNames={al:{season:"autumn",name:"\u5b89\u9646"},ar:{season:"spring",name:"\u963f\u962e"},bcg:{season:"summer",name:"\u767e\u8349\u8c37"},blts:{season:"winter",name:"\u767e\u91cc\u5c60\u82cf"},bsd:{season:"winter",name:"\u767e\u80dc\u5200"},ca:{season:"spring",name:"\u957f\u5b89"},fl:{season:"spring",name:"\u51e4\u6765"},fls:{season:"spring",name:"\u65b9\u5170\u751f"},fqx:{season:"spring",name:"\u98ce\u6674\u96ea"},sx:{season:"spring",name:"\u6c88\u66e6"},xf:{season:"spring",name:"\u5dfd\u82b3"},xl:{season:"summer",name:"\u8944\u94c3"},ywy:{season:"summer",name:"\u4e50\u65e0\u5f02"},xy:{season:"summer",name:"\u8c22\u8863"},yq:{season:"summer",name:"\u79ba\u671f"},qy:{season:"summer",name:"\u60ad\u81fe"},hy:{season:"autumn",name:"\u7ea2\u7389"},yqs:{season:"autumn",name:"\u5c39\u5343\u89de"},wry:{season:"autumn",name:"\u95fb\u4eba\u8bed"},oysg:{season:"autumn",name:"\u6b27\u9633\u5c11\u606d"},qhzr:{season:"autumn",name:"\u6e05\u548c\u771f\u4eba"},xyz:{season:"winter",name:"\u590f\u5937\u5219"},sy:{season:"winter",name:"\u6c88\u591c"},ly:{season:"winter",name:"\u9675\u8d8a"},hyue:{season:"winter",name:"\u534e\u6708"},qc:{season:"spring",name:"\u7434\u5ddd"},tyc:{season:"summer",name:"\u5929\u5889\u57ce"},ws:{season:"summer",name:"\u5deb\u5c71"},pl:{season:"summer",name:"\u84ec\u83b1"},qyt:{season:"autumn",name:"\u9752\u7389\u575b"},zrl:{season:"autumn",name:"\u7d2b\u6995\u6797"},ys:{season:"autumn",name:"\u69a3\u5c71"},ths:{season:"winter",name:"\u592a\u534e\u5c71"},yd:{season:"winter",name:"\u5e7d\u90fd"},lyc:{season:"winter",name:"\u6d41\u6708\u57ce"},zm:{season:"spring",name:"\u662d\u660e"},lc:{season:"spring",name:"\u9732\u8349"},hllp:{season:"summer",name:"\u9ed1\u9f99\u9cde\u7247"},gjfj:{season:"summer",name:"\u53e4\u5251\u711a\u5bc2"},gjhy:{season:"summer",name:"\u53e4\u5251\u7ea2\u7389"},qysnp:{season:"spring",name:"\u9752\u7389\u53f8\u5357\u4f69"},jt:{season:"summer",name:"\u7126\u70ad"},ttzq:{season:"autumn",name:"\u901a\u5929\u4e4b\u5668"},wmzj:{season:"autumn",name:"\u65e0\u540d\u4e4b\u5251"},jql:{season:"autumn",name:"\u91d1\u9e92\u9e9f"},tzbz:{season:"autumn",name:"\u5154\u5b50\u62b1\u6795"},gjhg:{season:"winter",name:"\u53e4\u5251\u6657\u5149"},wc:{season:"winter",name:"\u5fd8\u5ddd"},hykh:{season:"winter",name:"\u534e\u6708\u7b9c\u7bcc"},thg:{season:"spring",name:"\u6843\u82b1\u8c37"},jsh:{season:"spring",name:"\u9759\u6c34\u6e56"},snm:{season:"winter",name:"\u795e\u5973\u5893"}},cc._RF.pop()},{}],GameCanvas:[function(e,t,n){"use strict";cc._RF.push(t,"ca084i44hdKCoD8xoMth3MR","GameCanvas");var o=e("../Constants"),a=e("../utils/wsRequests");cc.Class({extends:cc.Component,properties:{game:{default:null,type:cc.Node}},onStart:function(){this.node.getChildByName("pairing").active=!0;var e=this;e.game.opacity=0,a.pairingRequest(),window.ws.onmessage=function(t){var n=JSON.parse(t.data);if(console.log("[".concat(new Date,"] WS data received"),n),n.type===o.events.START&&(e.node.getChildByName("pairing").active=!1,e.game.opacity=255,e.game.getComponent("Game").init(n)),n.type===o.events.OPPONENT_OFFLINE){var a=e.node.getChildByName("notification");a.active=!0,a.getChildByName("message").getComponent(cc.Label).string="\u5bf9\u65b9\u5df2\u6389\u7ebf"}e.game.getComponent("Game").handleGameAction(n)},window.ws.onclose=function(t){console.log("WebSocket instance closed.",new Date);var n=e.node.getChildByName("notification");n.active=!0,n.getChildByName("message").getComponent(cc.Label).string="\u5df2\u6389\u7ebf"}},onLoad:function(){this.node.on("restart",this.onStart,this)},start:function(){this.onStart()}}),cc._RF.pop()},{"../Constants":"Constants","../utils/wsRequests":"wsRequests"}],Game:[function(e,t,n){"use strict";function o(e){return s(e)||r(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}cc._RF.push(t,"a86aco55HxKDan9Hh+0ColS","Game");var i=e("../Constants");cc.Class({extends:cc.Component,properties:{cardsLeft:[],newCards:{default:null,type:cc.Node},myCards:{default:null,type:cc.Node},opponentCards:{default:null,type:cc.Node},selectedDeck:{default:null,type:cc.Node},opponentSelectedDeck:{default:null,type:cc.Node}},clear:function(){this.newCards.removeAllChildren(),this.myCards.removeAllChildren(),this.opponentCards.removeAllChildren(),this.selectedDeck.removeAllChildren(),this.opponentSelectedDeck.removeAllChildren(),this.node.getChildByName("left panel label").opacity=0,this.node.getChildByName("my score").getChildByName("points").getComponent(cc.Label).string=0,this.node.getChildByName("opponent score").getChildByName("points").getComponent(cc.Label).string=0,this.node.getChildByName("my score").getChildByName("arrow").opacity=0,this.node.getChildByName("opponent score").getChildByName("arrow").opacity=0,window.mySelectedCards=[],window.opponentSelectedCards=[],window.myPairs=[],window.opponentPairs=[],window.myCards=[],window.discardingCard=!1,window.selectedDeckCard=null,window.selectedOwnCard=null},init:function(e){this.clear(),this.newCards.getComponent("newCards").initCards(e.deck),this.myCards.getComponent("MyCards").initCards(e.cards),this.opponentCards.getComponent("OpponentCards").initCards(),e.turn===window.playerId?(this.myCards.getComponent("MyCards").setAllCardsSelectable(),this.node.getChildByName("my score").getChildByName("arrow").opacity=255):this.node.getChildByName("opponent score").getChildByName("arrow").opacity=255},onSelectCard:function(e){var t=e.target.getComponent("card").cardName;this.myCards.children.forEach(function(t){t.getComponent("card").selected&&t._id!==e.target._id&&t.getComponent("card").unselectCard()}),this.newCards.getComponent("newCards").setMatchingCardsSelectable(t)},onUnSelectCard:function(){this.newCards.getComponent("newCards").setAllCardsUnselectable()},onCardSelected:function(){this.newCards.getComponent("newCards").moveSelectedCard(this.selectedDeck,null,!0),this.myCards.getComponent("MyCards").moveSelectedCard(this.selectedDeck)},showPair:function(e){if(e.newPairs.length){var t=0,n=this.node.getChildByName("pair");t++,this.scheduleOnce(function(){n.getComponent("Pair").show(e,0)},0),e.newPairs.length>1&&this.schedule(function(){n.getComponent("Pair").show(e,t),t++},2,e.newPairs.length-2,0)}},handleCardSelected:function(e){console.log("card selected"),this.newCards.getComponent("newCards").addCardToLast(e.deck[e.deck.length-1],e.deck.length-1),this.node.getChildByName("my score").getChildByName("points").getComponent(cc.Label).string=e.score,this.node.getChildByName("my score").getChildByName("arrow").opacity=0,this.node.getChildByName("opponent score").getChildByName("arrow").opacity=255,this.showPair(e),window.myPairs=[].concat(o(window.myPairs),o(e.newPairs))},discardCard:function(e){this.myCards.getComponent("MyCards").checkRequireDiscardCard(e)?(console.log("require discard card"),this.node.getChildByName("left panel label").opacity=255,window.discardingCard=!0):this.node.getChildByName("left panel label").opacity=0},handleOpponentCardSelected:function(e){console.log("opponent card selected"),this.newCards.children.forEach(function(t){t.getComponent("card").cardName===e.opponentSelectedDeckCard&&(window.selectedDeckCard=t)});var t=this;this.newCards.getComponent("newCards").moveSelectedCard(this.opponentSelectedDeck,function(){t.newCards.getComponent("newCards").addCardToLast(e.deck[e.deck.length-1],e.deck.length-1),t.myCards.getComponent("MyCards").setAllCardsSelectable(),t.opponentCards.getComponent("OpponentCards").removeCardFromEnd()},!1),this.node.getChildByName("opponent score").getChildByName("points").getComponent(cc.Label).string=e.opponentScore,this.node.getChildByName("opponent score").getChildByName("arrow").opacity=0,this.node.getChildByName("my score").getChildByName("arrow").opacity=255,this.showPair(e),this.discardCard(e),window.opponentSelectedCards.push(e.opponentSelectedDeckCard),window.opponentSelectedCards.push(e.opponentSelectedOwnCard),window.opponentPairs=[].concat(o(window.opponentPairs),o(e.newPairs))},handleCardDiscarded:function(e){var t=e.cards.length-1;this.myCards.getComponent("MyCards").addCard(e.newCard,t),this.myCards.getComponent("MyCards").setAllCardsSelectable(),this.discardCard(e)},handleOpponentCardDiscarded:function(e){this.newCards.getComponent("newCards").addCardToLast(e.cardDiscarded,e.deck.length-1)},checkGameOver:function(e){!0===e.isGameOver&&(console.log("Game over!"),this.node.getChildByName("result").getComponent("Result").showResult(e.winner))},handleGameAction:function(e){window.myCards=e.cards,e.type!==i.events.CARD_SELECTED&&e.type!==i.events.OPPONENT_CARD_SELECTED||this.checkGameOver(e),e.type===i.events.CARD_SELECTED&&this.handleCardSelected(e),e.type===i.events.OPPONENT_CARD_SELECTED&&this.handleOpponentCardSelected(e),e.type===i.events.CARD_DISCARDED&&this.handleCardDiscarded(e),e.type===i.events.OPPONENT_CARD_DISCARDED&&this.handleOpponentCardDiscarded(e)},onLoad:function(){this.node.on("select-card",this.onSelectCard,this),this.node.on("unselect-card",this.onUnSelectCard,this),this.node.on("card-selected",this.onCardSelected,this)},start:function(){},onDestroy:function(){this.node.off("select-card",this.onSelectCard,this),this.node.off("unselect-card",this.onUnSelectCard,this),this.node.off("card-selected",this.onCardSelected,this)}}),cc._RF.pop()},{"../Constants":"Constants"}],Gloabal:[function(e,t,n){"use strict";cc._RF.push(t,"38af3O0Z3dGsrgXO7NRo1Tz","Gloabal"),cc._RF.pop()},{}],Loading:[function(e,t,n){"use strict";function o(e,t){return s(e)||r(e,t)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,a=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(o=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(a)throw r}}return n}}function s(e){if(Array.isArray(e))return e}cc._RF.push(t,"cb434NsCllB/73wMqnRr5sc","Loading");var i=e("../utils/websocket").initializeWs,c=e("../Constants");cc.Class({extends:cc.Component,properties:{nextScene:cc.SceneAsset},prefetchImages:function(){new XMLHttpRequest;for(var e=0,t=Object.entries(c.cardNames);e<t.length;e++){var n=o(t[e],2),a=n[0];n[1];cc.loader.load({url:"".concat(c.imagesUrl,"/").concat(a,".jpg"),type:"jpeg"})}},onLoad:function(){this.prefetchImages();var e=this,t=i();window.ws=t,t.onopen=function(e){console.log("Send Text WS was opened.")},t.onmessage=function(t){console.log("response text msg: "+t.data);var n=JSON.parse(t.data);n.type===c.events.CREATE_PLAYER_ID&&(window.playerId=n.id,cc.director.loadScene(e.nextScene.name))}},start:function(){}}),cc._RF.pop()},{"../Constants":"Constants","../utils/websocket":"websocket"}],MyCards:[function(e,t,n){"use strict";cc._RF.push(t,"c12aad9vrxHS79lzqN8AKgd","MyCards");var o=e("../Constants");cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab}},initCards:function(e){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.cardPrefab);n.x=50*t-250,n.zIndex=100-t,n.getComponent("card").loadCard(e[t]),n.parent=this.node}},setAllCardsUnselectable:function(){this.node.children.forEach(function(e){e.getComponent("card").isSelectable=!1})},setAllCardsSelectable:function(){this.node.children.forEach(function(e){e.getComponent("card").isSelectable=!0})},moveCardsToLeft:function(e){for(var t=e.x,n=this.node.children.length-1;n>=0;n--){var o=this.node.children[n];if(o.x>t){var a=cc.moveBy(.2,-50,0);o.zIndex++,o.runAction(a)}}},moveSelectedCard:function(e){var t=cc.callFunc(function(t){window.selectedOwnCard.removeFromParent(),window.selectedOwnCard.x=0,window.selectedOwnCard.y=0,window.selectedOwnCard.zIndex=2*e.children.length,window.selectedOwnCard.parent=e},this),n=cc.sequence(cc.moveTo(.5,cc.v2(-400,0)),t);this.moveCardsToLeft(window.selectedOwnCard),window.selectedOwnCard.runAction(n)},checkRequireDiscardCard:function(e){var t=[];window.myCards.forEach(function(e){var n=o.cardNames[e];if(n){var a=n.season;-1===t.indexOf(a)&&t.push(a)}});for(var n=0;n<e.deck.length;n++){var a=e.deck[n];if(t.indexOf(o.cardNames[a].season)>-1)return console.log("No need to discard"),!1}return console.log("Need to discard"),!0},addCard:function(e,t){var n=cc.instantiate(this.cardPrefab);n.x=50*t-250,n.zIndex=100-t,n.getComponent("card").loadCard(e),n.parent=this.node},onLoad:function(){},start:function(){},onDestroy:function(){}}),cc._RF.pop()},{"../Constants":"Constants"}],OpponentCards:[function(e,t,n){"use strict";cc._RF.push(t,"b49e6w3w49CqKAhxnpUfT16","OpponentCards"),cc.Class({extends:cc.Component,properties:{cardBackPrefab:{default:null,type:cc.Prefab}},initCards:function(){for(var e=0;e<10;e++){var t=cc.instantiate(this.cardBackPrefab);t.setPosition(50*e,0),t.zIndex=100-e,t.parent=this.node}},removeCardFromEnd:function(){var e=this.node.children[0];e.parent=null,e.destroy()},start:function(){}}),cc._RF.pop()},{}],OpponentSelectedDeck:[function(e,t,n){"use strict";cc._RF.push(t,"ee338a3FhpK8bPn5ocHQcxT","OpponentSelectedDeck"),cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab},cards:[]},onTouchStart:function(){this.node.parent.parent.getChildByName("overlay").getComponent("Overlay").mode="OPPONENT",this.node.parent.parent.getChildByName("overlay").active=!0,this.node.parent.active=!1},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},start:function(){},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)}}),cc._RF.pop()},{}],Overlay:[function(e,t,n){"use strict";cc._RF.push(t,"31fffnYxA5MJrlTMG+g7ey8","Overlay"),cc.Class({extends:cc.Component,properties:{cardWithPointsPrefab:{default:null,type:cc.Prefab},cards:{default:null,type:cc.Node},pairs:{default:null,type:cc.Node},menuIndex:1,mode:""},onClickBack:function(){this.node.parent.getChildByName("game").active=!0,this.node.active=!1},onClickMenu1:function(){this.node.getChildByName("cards").active=!0,this.node.getChildByName("pairs").active=!1,"OWN"===this.mode?this.cards.getComponent("Cards").initCards(window.mySelectedCards):"OPPONENT"===this.mode&&this.cards.getComponent("Cards").initCards(window.opponentSelectedCards)},onClickMenu2:function(){this.node.getChildByName("cards").active=!1,this.node.getChildByName("pairs").active=!0,"OWN"===this.mode?this.pairs.getComponent("Pairs").initPairs(window.myPairs):"OPPONENT"===this.mode&&this.pairs.getComponent("Pairs").initPairs(window.opponentPairs)},onLoad:function(){this.node.getChildByName("menu1").on(cc.Node.EventType.TOUCH_START,this.onClickMenu1,this),this.node.getChildByName("menu2").on(cc.Node.EventType.TOUCH_START,this.onClickMenu2,this)},start:function(){},onEnable:function(){if(this.node.getChildByName("cards").active=!0,this.node.getChildByName("pairs").active=!1,"OWN"===this.mode)this.node.getChildByName("header").getChildByName("title").getComponent(cc.Label).string="\u6211\u65b9\u5361\u724c",this.cards.getComponent("Cards").initCards(window.mySelectedCards);else if("OPPONENT"===this.mode){this.node.getChildByName("header").getChildByName("title").getComponent(cc.Label).string="\u5bf9\u65b9\u5361\u724c";this.cards.getComponent("Cards").initCards(window.opponentSelectedCards)}}}),cc._RF.pop()},{}],Pairs:[function(e,t,n){"use strict";cc._RF.push(t,"df3beCITtFO1o5sh3MVCzkN","Pairs"),cc.Class({extends:cc.Component,properties:{pairPrefab:{default:null,type:cc.Prefab}},initPairs:function(e){this.node.removeAllChildren();for(var t=0;t<e.length;t++){var n=cc.instantiate(this.pairPrefab);n.getComponent("matchingPair").load(e[t]),n.y=-140*t,n.parent=this.node}},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],Pair:[function(e,t,n){"use strict";cc._RF.push(t,"4747cEkZjdIO6X5PZfNS0Cs","Pair"),cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab}},loadPairImage:function(e,t,n){var o=cc.instantiate(this.cardPrefab),a=200*(n-1);o.x=-a/2+200*t,o.scale=2,o.anchorX=.5,o.anchorY=.5,o.getComponent("card").loadCard(e),o.parent=this.node.getChildByName("cards")},loadPairText:function(e,t){this.node.getChildByName("label").getComponent(cc.Label).string="\u5b8c\u6210\u7ec4\u5bf9  ".concat(e," !   \u83b7\u5f97\u989d\u5916\u5206\u503c ").concat(t," \u5206\uff01")},show:function(e,t){var n=this,o=e.newPairs[t],a=this;this.node.active=!0;var r=o.cards.length;o.cards.forEach(function(e,t){n.node.getComponent("Pair").loadPairImage(e,t,r)}),this.node.getComponent("Pair").loadPairText(o.name,o.points),setTimeout(function(){a.node.active=!1,a.node.getChildByName("cards").children.forEach(function(e){e.destroy()})},1700)},stopPropagation:function(e){e.stopPropagation()},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.stopPropagation)},start:function(){},onDestroy:function(){context.node.off(cc.Node.EventType.TOUCH_START,this.stopPropagation)}}),cc._RF.pop()},{}],Result:[function(e,t,n){"use strict";cc._RF.push(t,"9ba5chZp8lABpTjff5YXdv9","Result");var o=e("../utils/wsRequests");cc.Class({extends:cc.Component,properties:{resultString:{default:null,type:cc.Node}},showResult:function(e){this.node.active=!0,e===window.playerId?this.resultString.getComponent(cc.Label).string="\u80dc\u5229":this.resultString.getComponent(cc.Label).string="\u5931\u8d25"},newGame:function(){o.pairingRequest(),this.node.active=!1,this.node.dispatchEvent(new cc.Event.EventCustom("restart",!0))},start:function(){}}),cc._RF.pop()},{"../utils/wsRequests":"wsRequests"}],SelectedDeck:[function(e,t,n){"use strict";cc._RF.push(t,"56f28fguktAnYtztu2MFkzN","SelectedDeck"),cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab},cards:[]},onTouchStart:function(){this.node.parent.parent.getChildByName("overlay").getComponent("Overlay").mode="OWN",this.node.parent.parent.getChildByName("overlay").active=!0,this.node.parent.active=!1},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},start:function(){},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)}}),cc._RF.pop()},{}],StartingPage:[function(e,t,n){"use strict";cc._RF.push(t,"1172cn3s3RBBodnV3tHyqIQ","StartingPage"),cc.Class({extends:cc.Component,properties:{nextScene:cc.SceneAsset},onClickButton:function(){cc.director.loadScene(this.nextScene.name)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],cardWithPoints:[function(e,t,n){"use strict";cc._RF.push(t,"311baxthQ9C9rH1T1HdfxmM","cardWithPoints");var o=e("../Constants");cc.Class({extends:cc.Component,properties:{},loadCard:function(e){var t=this,n=this;cc.loader.load({url:"".concat(o.imagesUrl,"/").concat(e,".jpg"),type:"jpeg"},function(o,a){if(o)cc.error(o);else{var r=new cc.SpriteFrame(a);n.node.getChildByName("card image").getComponent(cc.Sprite).spriteFrame=r,t.cardName=e}})},onLoad:function(){},start:function(){}}),cc._RF.pop()},{"../Constants":"Constants"}],card:[function(e,t,n){"use strict";cc._RF.push(t,"e5653Vfp9pESplcrIWxZwh2","card");var o=e("../utils/wsRequests"),a=e("../Constants");cc.Class({extends:cc.Component,properties:{selected:!1,isSelectable:!1,isOnHover:!1,cardName:""},loadCard:function(e){var t=this,n=this;cc.loader.load({url:"".concat(a.imagesUrl,"/").concat(e,".jpg"),type:"jpeg"},function(o,a){if(o)cc.error(o);else{var r=new cc.SpriteFrame(a);n.getComponent(cc.Sprite).spriteFrame=r,t.cardName=e}})},handleCardSelected:function(){o.selectCardRequest(this.cardName,window.selectedOwnCard.getComponent("card").cardName),window.mySelectedCards.push(this.cardName),window.mySelectedCards.push(window.selectedOwnCard.getComponent("card").cardName),this.node.parent.parent.getChildByName("my cards").getComponent("MyCards").setAllCardsUnselectable(),this.node.parent.parent.getChildByName("new cards").getComponent("newCards").setAllCardsUnselectable(),this.node.dispatchEvent(new cc.Event.EventCustom("card-selected",!0))},discardCard:function(){var e=this.node.parent.getComponent("MyCards"),t=this.node.parent.parent.getChildByName("new cards");o.discardCardRequest(this.cardName);var n=this.node.parent.parent.getChildByName("new cards").children[0].getPosition().x+a.cardWidth,r=cc.callFunc(function(e){this.node.parent=t,this.node.y=0},this),s=cc.sequence(cc.moveTo(.5,cc.v2(n,210)),r);this.node.runAction(s),e.moveCardsToLeft(this.node),this.node.zIndex=100-t.children.length,this.isOnHover=!1,this.selected=!1,window.discardingCard=!1,e.setAllCardsUnselectable()},selectCard:function(){window.discardingCard&&"my cards"===this.node.parent.name?this.discardCard():this.isSelectable&&("new cards"===this.node.parent.name?(window.selectedDeckCard=this.node,this.handleCardSelected()):(this.isOnHover?this.node.y+=10:this.node.y+=30,this.selected=!0,window.selectedOwnCard=this.node,this.node.dispatchEvent(new cc.Event.EventCustom("select-card",!0))))},unselectCard:function(){"my cards"===this.node.parent.name&&(this.node.y-=30,this.isOnHover=!1,this.selected=!1,this.node.dispatchEvent(new cc.Event.EventCustom("unselect-card",!0)))},onTouchStart:function(e){this.selected?this.unselectCard():this.selectCard(),e.stopPropagation()},onMouseEnter:function(){!this.isSelectable||this.selected||this.isOnHover||(this.node.y+=20,this.isOnHover=!0)},onMouseLeave:function(){this.isSelectable&&!this.selected&&this.isOnHover&&(this.node.y-=20,this.isOnHover=!1)},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},start:function(){},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this)}}),cc._RF.pop()},{"../Constants":"Constants","../utils/wsRequests":"wsRequests"}],matchingPair:[function(e,t,n){"use strict";cc._RF.push(t,"a021cRGo51NQYzY41WuDhoR","matchingPair");e("../utils/wsRequests");var o=e("../Constants");cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab}},load:function(e){var t=this,n=this,a=[];e.cards.forEach(function(e,r){var s=cc.instantiate(t.cardPrefab);s.x=20*r,s.y=0,s.anchorX=0,s.anchorY=1,s.zIndex=100-r,s.scale=.8,s.getComponent("card").loadCard(e),s.parent=n.node.getChildByName("cards"),a.push(o.cardNames[e].name)}),this.node.getChildByName("card names").getComponent(cc.Label).string=a.join(","),this.node.getChildByName("name").getComponent(cc.Label).string=e.name,this.node.getChildByName("points").getComponent(cc.Label).string="".concat(e.points,"\u5206")},onLoad:function(){},start:function(){}}),cc._RF.pop()},{"../Constants":"Constants","../utils/wsRequests":"wsRequests"}],newCards:[function(e,t,n){"use strict";cc._RF.push(t,"2b9ae0ykuVJmomTBPH6kcbh","newCards");var o=e("./Constants");cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab}},moveSelectedCard:function(e,t,n){for(var a,r=window.selectedDeckCard.x,s=cc.callFunc(function(n){window.selectedDeckCard.removeFromParent(),window.selectedDeckCard.x=0,window.selectedDeckCard.y=0,window.selectedDeckCard.zIndex=2*e.children.length+1,window.selectedDeckCard.parent=e,t&&t()},this),i=this.node.children.length-1;i>=0;i--){var c=this.node.children[i];if(c.x>r){c.zIndex++;var d=cc.moveBy(.2,-o.cardWidth,0);c.runAction(d)}}a=n?cc.sequence(cc.moveTo(.5,cc.v2(-400,-210)),s):cc.sequence(cc.moveTo(.5,cc.v2(-400,210)),s),window.selectedDeckCard.runAction(a)},addCardToLast:function(e,t){var n=cc.instantiate(this.cardPrefab);n.x=o.cardWidth*t-250,n.zIndex=100-t,n.getComponent("card").loadCard(e),n.parent=this.node},setMatchingCardsSelectable:function(e){this.node.children.forEach(function(t){var n=t.getComponent("card").cardName;o.cardNames[n].season===o.cardNames[e].season?t.getComponent("card").isSelectable=!0:t.getComponent("card").isSelectable=!1})},setAllCardsUnselectable:function(){this.node.children.forEach(function(e){e.getComponent("card").isSelectable=!1})},initCards:function(e){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.cardPrefab);n.x=o.cardWidth*t-250,n.zIndex=100-t,n.getComponent("card").loadCard(e[t]),n.parent=this.node}},start:function(){}}),cc._RF.pop()},{"./Constants":"Constants"}],runtime:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"00bbaKkH9pGUa2JQWKkkn3a","runtime");var a=function(e){var t,n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function d(e,t,n,o){var a=t&&t.prototype instanceof f?t:f,r=Object.create(a.prototype),s=new _(o||[]);return r._invoke=R(e,n,s),r}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var h="suspendedStart",u="suspendedYield",p="executing",C="completed",m={};function f(){}function y(){}function g(){}var w={};w[s]=function(){return this};var v=Object.getPrototypeOf,N=v&&v(v(x([])));N&&N!==n&&a.call(N,s)&&(w=N);var S=g.prototype=f.prototype=Object.create(w);function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function b(e,t){function n(r,s,i,c){var d=l(e[r],e,s);if("throw"!==d.type){var h=d.arg,u=h.value;return u&&"object"===o(u)&&a.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,i,c)},function(e){n("throw",e,i,c)}):t.resolve(u).then(function(e){h.value=e,i(h)},function(e){return n("throw",e,i,c)})}c(d.arg)}var r;this._invoke=function(e,o){function a(){return new t(function(t,a){n(e,o,t,a)})}return r=r?r.then(a,a):a()}}function R(e,t,n){var o=h;return function(a,r){if(o===p)throw new Error("Generator is already running");if(o===C){if("throw"===a)throw r;return D()}for(n.method=a,n.arg=r;;){var s=n.delegate;if(s){var i=P(s,n);if(i){if(i===m)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=C,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=l(e,t,n);if("normal"===c.type){if(o=n.done?C:u,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=C,n.method="throw",n.arg=c.arg)}}}function P(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var a=l(o,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var r=a.arg;return r?r.done?(n[e.resultName]=r.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function x(e){if(e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,r=function n(){for(;++o<e.length;)if(a.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}return{next:D}}function D(){return{value:t,done:!0}}return y.prototype=S.constructor=g,g.constructor=y,g[c]=y.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},E(b.prototype),b.prototype[i]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,o,a,r){void 0===r&&(r=Promise);var s=new b(d(t,n,o,a),r);return e.isGeneratorFunction(n)?s:s.next().then(function(e){return e.done?e.value:s.next()})},E(S),S[c]="Generator",S[s]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=x,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(o,a){return i.type="throw",i.arg=e,n.next=o,a&&(n.method="next",n.arg=t),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],i=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),d=a.call(s,"finallyLoc");if(c&&d){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var a=o.arg;O(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:x(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),m}},e}("object"===(void 0===t?"undefined":o(t))?t.exports:{});try{regeneratorRuntime=a}catch(e){Function("r","regeneratorRuntime = r")(a)}cc._RF.pop()},{}],websocket:[function(e,t,n){"use strict";cc._RF.push(t,"53449Ia0BJJFJMDU7TOYjtq","websocket");var o=e("../Constants").remoteUrl;t.exports.initializeWs=function(){console.log("WebSocket...",new Date);var e=new WebSocket("wss://".concat(o));return e.onerror=function(e){console.log("Send Text fired an error")},e},cc._RF.pop()},{"../Constants":"Constants"}],wsRequests:[function(e,t,n){"use strict";cc._RF.push(t,"07521YGti9LcJYbo6/kFCrs","wsRequests");e("./websocket");var o=e("../Constants");t.exports.discardCardRequest=function(e){window.ws.send(JSON.stringify({type:o.events.DISCARD_CARD,playerId:window.playerId,cardToDiscard:e}))},t.exports.selectCardRequest=function(e,t){window.ws.send(JSON.stringify({type:o.events.SELECT_CARD,playerId:window.playerId,selectedCardFromDeck:e,selectedOwnCard:t}))},t.exports.pairingRequest=function(){window.ws.send(JSON.stringify({type:o.events.PAIRING}))},cc._RF.pop()},{"../Constants":"Constants","./websocket":"websocket"}]},{},["runtime","Constants","Gloabal","StartingPage","newCards","card","cardWithPoints","matchingPair","Game","GameCanvas","Loading","MyCards","OpponentCards","OpponentSelectedDeck","Pair","Result","SelectedDeck","Cards","Overlay","Pairs","websocket","wsRequests"]);