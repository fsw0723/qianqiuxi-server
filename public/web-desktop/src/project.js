window.__require=function e(t,n,c){function s(r,a){if(!n[r]){if(!t[r]){var d=r.split("/");if(d=d[d.length-1],!t[d]){var i="function"==typeof __require&&__require;if(!a&&i)return i(d,!0);if(o)return o(d,!0);throw new Error("Cannot find module '"+r+"'")}r=d}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){return s(t[r][1][e]||e)},l,l.exports,e,t,n,c)}return n[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<c.length;r++)s(c[r]);return s}({CardModel:[function(e,t,n){"use strict";function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"c2a1bEq3mlHeKEVeBFpM8H0","CardModel"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function e(t){c(this,e),this.name=t},t.exports=n.default,cc._RF.pop()},{}],Constants:[function(e,t,n){"use strict";cc._RF.push(t,"79f50jxO+9H1rWTW+uatN7m","Constants"),t.exports.remoteUrl="qian-qiu-xi.herokuapp.com",t.exports.events={CREATE_PLAYER_ID:"CREATE_PLAYER_ID",PAIRING:"PAIRING",START:"START",SELECT_CARD:"SELECT_CARD",CARD_SELECTED:"CARD_SELECTED"},t.exports.cardNames={al:"autumn",ar:"spring",bcg:"summer",blts:"winter",bsd:"winter",ca:"spring",fl:"spring",fls:"spring",fqx:"spring",sx:"spring",xf:"spring",xl:"summer",ywy:"summer",xy:"summer",yq:"summer",qy:"summer",hy:"autumn",yqs:"autumn",wry:"autumn",oysg:"autumn",qhzr:"autumn",xyz:"winter",sy:"winter",ly:"winter",hyue:"winter",qc:"spring",tyc:"summer",ws:"summer",pl:"summer",qyt:"autumn",zrl:"autumn",ys:"autumn",ths:"winter",yd:"winter",lyc:"winter",zm:"spring",lc:"spring",hllp:"summer",gjfj:"summer",gjhy:"summer",qysnp:"spring",jt:"summer",ttzq:"autumn",wmzj:"autumn",jql:"autumn",tzbz:"autumn",gjhg:"winter",wc:"winter",hykh:"winter",thg:"spring",jsh:"spring",snm:"winter"},cc._RF.pop()},{}],Game:[function(e,t,n){"use strict";cc._RF.push(t,"a86aco55HxKDan9Hh+0ColS","Game");e("../utils/websocket");var c=e("../Constants");cc.Class({extends:cc.Component,properties:{cardsLeft:[],newCards:{default:null,type:cc.Node},myCards:{default:null,type:cc.Node},opponentCards:{default:null,type:cc.Node},selectedDeck:{default:null,type:cc.Node}},onSelectCard:function(e){var t=e.target.getComponent("card").cardName;this.myCards.children.forEach(function(t){t.getComponent("card").selected&&t._id!==e.target._id&&t.getComponent("card").unselectCard()}),this.newCards.children.forEach(function(e){var n=e.getComponent("card").cardName;c.cardNames[n]===c.cardNames[t]?e.getComponent("card").isSelectable=!0:e.getComponent("card").isSelectable=!1})},onUnSelectCard:function(){this.newCards.children.forEach(function(e){e.getComponent("card").isSelectable=!1})},onCardSelected:function(){this.newCards.getComponent("newCards").moveSelectedCard(this.selectedDeck),this.myCards.getComponent("MyCards").moveSelectedCard(this.selectedDeck),this.newCards.getComponent("newCards").addCardToLast("blts")},onLoad:function(){this.node.getChildByName("label").opacity=255,this.node.on("select-card",this.onSelectCard,this),this.node.on("unselect-card",this.onUnSelectCard,this),this.node.on("card-selected",this.onCardSelected,this)},start:function(){var e=["sy","oysg","yqs","zm","qysnp","wry","thg","bcg","hyue","xl"],t=["pl","fqx","zrl","xyz","blts","hy","ttzq","jsh"];this.node.getChildByName("label").opacity=0,this.newCards.getComponent("newCards").initCards(e),this.myCards.getComponent("MyCards").initCards(t),this.opponentCards.getComponent("OpponentCards").initCards()},onDestroy:function(){this.node.off("select-card",this.onSelectCard,this),this.node.off("unselect-card",this.onUnSelectCard,this),this.node.off("card-selected",this.onCardSelected,this)}}),cc._RF.pop()},{"../Constants":"Constants","../utils/websocket":"websocket"}],Gloabal:[function(e,t,n){"use strict";cc._RF.push(t,"38af3O0Z3dGsrgXO7NRo1Tz","Gloabal"),cc._RF.pop()},{}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"cb434NsCllB/73wMqnRr5sc","Loading");var c=e("../utils/websocket"),s=e("../Constants");cc.Class({extends:cc.Component,properties:{nextScene:cc.SceneAsset},onLoad:function(){var e=this;c.onopen=function(e){console.log("Send Text WS was opened.")},c.onmessage=function(t){console.log("response text msg: "+t.data);var n=JSON.parse(t.data);n.type===s.events.CREATE_PLAYER_ID&&(window.id=n.id,cc.director.loadScene(e.nextScene.name))}},start:function(){}}),cc._RF.pop()},{"../Constants":"Constants","../utils/websocket":"websocket"}],MyCards:[function(e,t,n){"use strict";cc._RF.push(t,"c12aad9vrxHS79lzqN8AKgd","MyCards"),cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab}},initCards:function(e){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.cardPrefab);n.x=50*t-300,n.zIndex=100-t,n.getComponent("card").loadCard(e[t]),n.parent=this.node,n.getComponent("card").isSelectable=!0}},moveSelectedCard:function(e){for(var t=cc.callFunc(function(t){window.selectedOwnCard.removeFromParent(),window.selectedOwnCard.x=0,window.selectedOwnCard.y=0,window.selectedOwnCard.zIndex=2*e.children.length,window.selectedOwnCard.parent=e},this),n=cc.sequence(cc.moveTo(.5,cc.v2(-400,0)),t),c=!1,s=this.node.children.length-1;s>=0;s--){var o=this.node.children[s];if(o._id!==window.selectedOwnCard._id){if(c){var r=cc.moveBy(.2,-50,0);o.runAction(r)}}else c=!0}window.selectedOwnCard.runAction(n)},onLoad:function(){this.node.on("card-selected",this.onCardSelected,this)},start:function(){},onDestroy:function(){this.node.off("card-selected",this.onCardSelected,this)}}),cc._RF.pop()},{}],OpponentCards:[function(e,t,n){"use strict";cc._RF.push(t,"b49e6w3w49CqKAhxnpUfT16","OpponentCards"),cc.Class({extends:cc.Component,properties:{cardBackPrefab:{default:null,type:cc.Prefab}},initCards:function(e){for(var t=0;t<=8;t++){var n=cc.instantiate(this.cardBackPrefab);n.setPosition(50*t,0),n.parent=this.node}},start:function(){}}),cc._RF.pop()},{}],SelectedDeck:[function(e,t,n){"use strict";cc._RF.push(t,"56f28fguktAnYtztu2MFkzN","SelectedDeck"),cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab},cards:[]},start:function(){}}),cc._RF.pop()},{}],StartingPage:[function(e,t,n){"use strict";cc._RF.push(t,"1172cn3s3RBBodnV3tHyqIQ","StartingPage"),cc.Class({extends:cc.Component,properties:{nextScene:cc.SceneAsset},onClickButton:function(){cc.director.loadScene(this.nextScene.name)},onLoad:function(){},start:function(){}}),cc._RF.pop()},{}],card:[function(e,t,n){"use strict";cc._RF.push(t,"e5653Vfp9pESplcrIWxZwh2","card");e("./utils/websocket"),e("./Constants");cc.Class({extends:cc.Component,properties:{selected:!1,isSelectable:!1,cardName:""},loadCard:function(e){var t=this,n=this;cc.loader.load({url:"https://qian-qiu-xi.herokuapp.com/images/".concat(e,".jpg"),type:"jpeg"},function(c,s){if(c)cc.error(c);else{var o=new cc.SpriteFrame(s);n.getComponent(cc.Sprite).spriteFrame=o,t.cardName=e}})},handleCardSelected:function(){this.node.dispatchEvent(new cc.Event.EventCustom("card-selected",!0))},selectCard:function(){this.isSelectable&&("new cards"===this.node.parent.name?(window.selectedDeckCard=this.node,this.handleCardSelected()):(this.node.y+=30,this.selected=!0,window.selectedOwnCard=this.node,this.node.dispatchEvent(new cc.Event.EventCustom("select-card",!0))))},unselectCard:function(){"my cards"===this.node.parent.name&&(this.node.y-=30,this.selected=!1,this.node.dispatchEvent(new cc.Event.EventCustom("unselect-card",!0)))},onTouchStart:function(e){this.selected?this.unselectCard():this.selectCard(),e.stopPropagation()},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},start:function(){},onDestroy:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)}}),cc._RF.pop()},{"./Constants":"Constants","./utils/websocket":"websocket"}],newCards:[function(e,t,n){"use strict";cc._RF.push(t,"2b9ae0ykuVJmomTBPH6kcbh","newCards"),cc.Class({extends:cc.Component,properties:{cardPrefab:{default:null,type:cc.Prefab}},moveSelectedCard:function(e){for(var t=cc.callFunc(function(t){window.selectedDeckCard.removeFromParent(),window.selectedDeckCard.x=0,window.selectedDeckCard.y=0,window.selectedDeckCard.zIndex=2*e.children.length+1,window.selectedDeckCard.parent=e},this),n=!1,c=this.node.children.length-1;c>=0;c--){var s=this.node.children[c];if(s._id!==window.selectedDeckCard._id){if(n){s.zIndex++;var o=cc.moveBy(.2,-50,0);s.runAction(o)}}else n=!0}var r=cc.sequence(cc.moveTo(.5,cc.v2(-400,-210)),t);window.selectedDeckCard.runAction(r)},addCardToLast:function(e){var t=cc.instantiate(this.cardPrefab);t.x=150,t.zIndex=91,t.getComponent("card").loadCard(e),t.parent=this.node},initCards:function(e){for(var t=0;t<e.length;t++){var n=cc.instantiate(this.cardPrefab);n.x=50*t-300,n.zIndex=100-t,n.getComponent("card").loadCard(e[t]),n.parent=this.node}},start:function(){}}),cc._RF.pop()},{}],websocket:[function(e,t,n){"use strict";cc._RF.push(t,"53449Ia0BJJFJMDU7TOYjtq","websocket");var c,s=e("../Constants").remoteUrl;console.log("WebSocket...",new Date),c||((c=new WebSocket("ws://".concat(s))).onerror=function(e){console.log("Send Text fired an error")},c.onclose=function(e){console.log("WebSocket instance closed.",new Date)}),t.exports=c,cc._RF.pop()},{"../Constants":"Constants"}]},{},["Constants","Gloabal","StartingPage","card","CardModel","newCards","Game","Loading","MyCards","OpponentCards","SelectedDeck","websocket"]);